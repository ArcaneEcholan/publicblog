---
title: "版本-冲突"
date: '2025-10-24'
tags: ['']
draft: false
summary:
---

jna 4.x vs 5.x 版本提升为什么有风险

* 兼容性上一般是向后兼容，新版本可以兼容老版本，而老版本不会兼容新版本，比如新的库增加拓展了接口，但是由于老版本接口应用太广而无法完全随之升级，那就会保留一份老版本的接口，库的维护者对老的接口实现也要做相应的支持。
* 贸然提升版本，并且对依赖老版本库的代码在接口调用上没有做相应的变动，那依赖老版本的代码会报错。库的维护者也会面临额外的支持维护工作量。
* 没有充分的理由，不要进行“升级”
* 重点高危操作：函数重命名，文件夹（包名）重命名，文件腾挪，同一个产品不同分支时每个分支都有不同的编译方式不同的ci脚本（此时每个分支都还在，但是你要做的维护工作翻倍）。
* 指导方向：新增文件而非重命名原先文件，一定保留新老版本的文件。


git

git merge 以及 git rebase 过程中的冲突处理应该是紧急兜底的措施，而不应该是一种常态化的版本管理手段。

如果 git merge 或者 git rebase 频繁出现冲突，说明分支管理策略、程序本身的模块化、开发者的开发习惯上本身就存在问题。

* 分支管理策略上，应该尽量减少长期存在的分支，避免多人在同一分支上并行开发过久。长期存在的分支会导致分支间差异过大，合并时冲突频发。
* 程序模块化上，应该尽量将程序拆分成多个独立模块，减少模块间的耦合度。高耦合度的模块会导致多个开发者频繁修改同一部分代码，增加冲突的可能性。
* 开发者习惯上，应该拎得清楚楚自己负责的代码范围，避免修改和本次更新不相关的代码。频繁修改不相关代码会增加冲突的风险。

如果不遵守以上的规则，到时候维护冲突的时候够你受的。

