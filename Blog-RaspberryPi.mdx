---
title: "åšå®¢è¿ç§»åˆ° raspberrypi zero 2w"
date: '2025-05-11'
tags: ['raspberrypi', 'linux']
draft: false
summary:
---

## åšå®¢è¿ç§»èƒŒæ™¯ä¸è®¾å¤‡å‡†å¤‡

è¿™å‡ å¤©æ¬å®¶ï¼Œç¯å¢ƒå„æ–¹é¢éƒ½ä¸ç¨³å®šï¼Œæ–°å®¶æ²¡æœ‰ç½‘ç»œï¼ŒåŸæœ¬å±‹å†…æ¶è®¾çš„å­ç½‘å’ŒæœåŠ¡å™¨ä¹Ÿå› ä¸ºæ¬è¿å˜å¾—ä¸å¯é ã€‚

ä¸ºäº†æ–¹ä¾¿è¿ç§»ï¼Œæ­£å¥½æ‰‹è¾¹è¿˜æœ‰å‡ ä¸ª Raspberry Piï¼Œå°±è€ƒè™‘æŠŠåšå®¢è¿åˆ° Pi ä¸Šè¿è¡Œã€‚

è®¾å¤‡è§„æ ¼å‚è€ƒå¦‚ä¸‹ï¼š

- https://www.raspberrypi.com/products/raspberry-pi-zero-2-w/
- https://datasheets.raspberrypi.com/rpizero2/raspberry-pi-zero-2-w-product-brief.pdf

> At the heart of Raspberry Pi Zero 2 W is RP3A0, a custom-built system-in-package designed by Raspberry Pi in the UK. With a quad-core 64-bit ARM Cortex-A53 processor clocked at 1GHz and 512MB of SDRAM, Zero 2 is up to five times as fast as the original Raspberry Pi Zero.

RP3A0 æ ¸å¿ƒå‚æ•°ï¼š

- quad-core 64-bit ARM Cortex-A53ï¼Œ1GHz
- 512MB SDRAM

å‡†å¤‡ä»¥ä¸‹åŸºç¡€ç‰©æ–™ï¼š

- Raspberry Pi Zero 2 W
- microSD å¡ + è¯»å¡å™¨
- SD å¡
- æ”¯æŒæ•°æ®ä¼ è¾“çš„ USB æ•°æ®çº¿ï¼ˆä»…å……ç”µåŠŸèƒ½çš„çº¿ä¸è¡Œï¼‰
- ç¨³å®šç”µæºä¾›ç”µçº¿

---

###  Imager ç‰ˆæœ¬å»ºè®®ä¸é•œåƒé€‰æ‹©

å»ºè®®ä½¿ç”¨ Raspberry Pi Imager **v1.7.5 åŠä»¥ä¸Š**ç‰ˆæœ¬è¿›è¡Œçƒ§å½•ï¼š

- v1.8 éœ€è¦ Ubuntu 22.04 æ‰èƒ½æ­£å¸¸è¿è¡Œ
- v1.7.5 æ˜¯å…¼å®¹æ€§å’ŒåŠŸèƒ½çš„å¹³è¡¡ç‚¹ï¼ŒUbuntu 20.04 å¯ç”¨
- v1.7.2 UI ä¸å¥½ç”¨ï¼Œå¹¶ä¸”æˆ‘è¿™è¾¹å‡ºç°è¿‡å¥‡æ€ªçš„é—®é¢˜ï¼Œä¸æ¨èä½¿ç”¨

ç‰ˆæœ¬å‘å¸ƒä¿¡æ¯å¯å‚è€ƒï¼šhttps://github.com/raspberrypi/rpi-imager/releases

---

### ğŸ“¦ æœ¬æ¬¡ä½¿ç”¨çš„ç³»ç»Ÿé•œåƒ

```
Raspberry Pi OS Lite
Release date: May 6th 2025
System: 64-bit
Kernel version: 6.12
Debian version: 12 (bookworm)
Size: 424MB
```

ä¸»æœºé•œåƒï¼šUbuntu 20.04.6 LTS (Focal Fossa)

çƒ§å½•é•œåƒè¿™ç±»åŸºç¡€æ­¥éª¤å°±ä¸èµ˜è¿°äº†ã€‚

## é…ç½®é€šè¿‡ ethernet over usb æ¥å…¥ pi

è™½ç„¶è¿™ä¸ª pi é…å¤‡äº† wifi æ¨¡å—ï¼Œä½†æ˜¯ wifi æ¥å…¥çš„ä¾èµ–æ»¡è¶³æ¡ä»¶å¤ªé«˜ï¼Œé…ç½®å¦ä¸€ç§æ¥å…¥æ–¹å¼æ˜¯å¿…è¦çš„ã€‚

## ğŸ“¡ é…ç½®é€šè¿‡ USB ä»¥å¤ªç½‘è¿æ¥ï¼ˆEthernet over USBï¼‰

è™½ç„¶ Raspberry Pi Zero 2 W è‡ªå¸¦ Wi-Fi æ¨¡å—ï¼Œä½†åœ¨æ— å›¾å½¢ç•Œé¢ã€æ— å¤–è®¾çš„ç¯å¢ƒä¸­ï¼Œé…ç½® Wi-Fi å¾€å¾€å›°éš¾é‡é‡ã€‚å› æ­¤ï¼Œå¯ç”¨ USB OTG ç½‘ç»œæ˜¯æ›´ç¨³å®šã€å¯æ§çš„æ¥å…¥æ–¹å¼ã€‚

---

### ğŸ›  å†™æ­»çš„é…ç½®æ–‡ä»¶ä¿®æ”¹

ç›®æ ‡æ˜¯è®© Pi åœ¨å¼€æœºåé€šè¿‡ USB è™šæ‹Ÿå‡ºä¸€ä¸ªç½‘å¡ï¼ˆ`usb0`ï¼‰ï¼Œå¹¶å…è®¸ä¸»æœºé€šè¿‡æ­¤ç½‘å¡è®¿é—® Piã€‚

#### 1. å¯ç”¨ DWC2 æ§åˆ¶å™¨ï¼ˆ`config.txt`ï¼‰

ç¼–è¾‘ SD å¡çš„ `/boot/config.txt`ï¼Œåœ¨ `[all]` æ®µæ·»åŠ ï¼š

```ini
[all]
dtoverlay=dwc2,dr_mode=peripheral
```

å¯è§çš„å®Œæ•´ç‰‡æ®µå¦‚ä¸‹ï¼ˆå…¶ä»–æ®µä¿æŒä¸å˜ï¼‰ï¼š

```ini
# ...

[cm4]
# Enable host mode on the 2711 built-in XHCI USB controller.
# This line should be removed if the legacy DWC2 controller is required
# (e.g. for USB device mode) or if USB support is not required.
otg_mode=1

[cm5]
dtoverlay=dwc2

[all]
dtoverlay=dwc2,dr_mode=peripheral
```

è§£é‡Šï¼š

- `[cm4]`, `[cm5]`, `[all]` æ˜¯æ¡ä»¶æ®µå¤´ï¼š

  - `cm4`: ä»…é€‚ç”¨äº Compute Module 4

  - `cm5`: ä»…é€‚ç”¨äº Compute Module 5

  - `all`: æ‰€æœ‰è®¾å¤‡é€šç”¨ï¼ŒZero 2 W å¿…é¡»å†™åœ¨è¿™é‡Œ

- `dwc2`: æ˜¯ Pi Zero ä½¿ç”¨çš„ USB æ§åˆ¶å™¨é©±åŠ¨ï¼ˆSynopsys DesignWare USB 2.0 OTGï¼‰

- `dr_mode=peripheral`: å¼ºåˆ¶è¯¥æ§åˆ¶å™¨å·¥ä½œåœ¨ USB è®¾å¤‡æ¨¡å¼ï¼ˆå³ OTGï¼‰

å…³äº OTG è®¾å¤‡è§’è‰²è¯¦æƒ…å¯å‚è€ƒç»´åŸºç™¾ç§‘ï¼š

ğŸ”— [https://en.wikipedia.org/wiki/USB_On-The-Go]()

---

2. åŠ è½½å†…æ ¸æ¨¡å—ï¼ˆ`cmdline.txt`ï¼‰
   ç¼–è¾‘ `/boot/cmdline.txt`ï¼Œåœ¨ `rootwait` åè¿½åŠ ï¼š

```ini
modules-load=dwc2,g_ether
```

ç¤ºä¾‹ï¼ˆä»…å±•ç¤ºæ ¸å¿ƒç‰‡æ®µï¼‰ï¼š

```
... rootwait modules-load=dwc2,g_ether ...
```

è¿™æ ·ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½ `dwc2` æ§åˆ¶å™¨é©±åŠ¨ä¸ `g_ether` è™šæ‹Ÿ USB ç½‘å¡æ¨¡å—ã€‚

---

###  ç³»ç»Ÿå¯åŠ¨åéªŒè¯é…ç½®ï¼ˆPi ç«¯ï¼‰

è¿›å…¥ç³»ç»Ÿï¼ˆå¦‚é€šè¿‡ Wi-Fi æš‚æ—¶ SSHï¼‰åï¼Œæ‰§è¡Œï¼š

```bash
ip a
```

è‹¥é…ç½®æˆåŠŸï¼Œèƒ½çœ‹åˆ°å¦‚ä¸‹è®¾å¤‡ï¼š

```vbnet
usb0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
    link/ether 76:18:45:04:72:aa brd ff:ff:ff:ff:ff:ff
```

è¿™è¯´æ˜ `g_ether` æˆåŠŸåˆ›å»ºäº†è™šæ‹Ÿç½‘å¡ `usb0`ã€‚

é»˜è®¤æƒ…å†µä¸‹è¯¥ç½‘å£æœªæ¿€æ´»ï¼Œéœ€æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
ip link set usb0 up
```

æ‰§è¡Œåè‹¥çœ‹åˆ° `NO-CARRIER` çŠ¶æ€ï¼Œè¯´æ˜æ¥å£å°šæœªè¿æ¥ä¸»æœºï¼ˆå³ OTG USB å°šæœªæ’å…¥æˆ–ä¸»æœºæœªè¯†åˆ«è¯¥è®¾å¤‡ï¼‰ã€‚

ç»§ç»­é…ç½®é™æ€ IPï¼š

```bash
ip addr add 172.31.255.254/30 dev usb0
```

å®Œæˆåï¼ŒPi å°†é€šè¿‡ `172.31.255.254` åœ°å€ä½œä¸º USB ç½‘ç»œçš„è®¾å¤‡ç«¯ï¼Œä¸»æœºä¾§é…ç½®å¥½åï¼Œå³å¯é€šè¿‡æ­¤åœ°å€è®¿é—®ã€‚

## ğŸ–¥ï¸ ä¸»æœºä¾§é…ç½®ï¼ˆLinux ç¤ºä¾‹ï¼‰

æˆ‘ç”¨çš„æ˜¯ linux ä¸»æœºï¼Œå½“ç„¶è™šæ‹Ÿæœºä¹Ÿå¯ä»¥ï¼Œå°±æ˜¯æ³¨æ„åœ¨è™šæ‹Ÿæœºé‡Œé…ç½®ä¸€ä¸‹æŠŠä¸»æœºçš„ usb è®¾å¤‡æ¥åˆ°è™šæ‹Ÿæœºå³å¯

å°† OTG æ¥å£æ’å…¥ä¸»æœºï¼š

- æŸ¥çœ‹æ˜¯å¦æ–°å¢ç½‘å¡ï¼š

  - æ¡Œé¢ç¯å¢ƒå¯åœ¨å³ä¸Šè§’ç½‘ç»œå›¾æ ‡ä¸­æŸ¥çœ‹
  - ç»ˆç«¯æ‰§è¡Œï¼š

    ```bash
    ip link
    ```

  - é€šå¸¸æ˜¯ç±»ä¼¼ `enxXXXX` çš„åå­—ï¼Œå¦‚ `enxf62c77dc0a34`

- é…ç½®ä¸»æœºä¾§ IPï¼š

  ```bash
  sudo ip addr add 172.31.255.253/30 dev enxf62c77dc0a34
  sudo ip link set enxf62c77dc0a34 up
  ```

- æµ‹è¯•è¿é€šæ€§ï¼š

  ```bash
  ping 172.31.255.254
  ```

---

æ³¨æ„ï¼šUbuntu æ¡Œé¢ç‰ˆå¯èƒ½å‡ºç°çš„è¿æ¥é—®é¢˜

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Ubuntu 20.04 æ¡Œé¢ç‰ˆï¼Œåœ¨ä¸º USB ç½‘å¡åˆ†é…å®Œ IP åï¼Œç³»ç»Ÿå¯èƒ½ä¼šå¼¹å‡ºä»¥ä¸‹é”™è¯¯ï¼š

> **â€œConnection failed: Activation of network connection failedâ€**

æ­¤æ—¶ç³»ç»Ÿä¼šæ’¤é”€ä½ æ‰‹åŠ¨åˆ†é…çš„ IPï¼Œå¯¼è‡´æ— æ³•ç»§ç»­é€šä¿¡ã€‚

è§£å†³æ–¹æ³•ï¼šå–æ¶ˆç½‘ç»œç®¡ç†å™¨çš„å¹²é¢„

1. ç‚¹å‡»å³ä¸Šè§’ç½‘ç»œå›¾æ ‡ â†’ è¿›å…¥ **â€œæœ‰çº¿ç½‘ç»œâ€** â†’ æ‰¾åˆ°æ–°å‡ºç°çš„ USB Ethernet æ¥å£
2. è¿›å…¥è¯¥è¿æ¥è®¾ç½®ï¼Œé€‰æ‹© **â€œåˆ é™¤è¿æ¥é…ç½®â€**ï¼ˆæˆ–ç§°â€œå¿˜è®°æ­¤è¿æ¥â€ï¼‰
3. å›åˆ°ç»ˆç«¯ï¼Œé‡æ–°æ‰‹åŠ¨ä¸ºç½‘å¡é…ç½® IPï¼š

```bash
sudo ip addr add 172.31.255.253/30 dev enxf62c77dc0a34
sudo ip link set enxf62c77dc0a34 up
```

å¦‚èƒ½æˆåŠŸå“åº”ï¼Œè¯´æ˜é—®é¢˜è§£å†³ï¼ŒUSB ç½‘ç»œé“¾è·¯å·²å»ºç«‹ã€‚

## é…ç½® Wi-Fiï¼ˆå¯é€‰ï¼‰

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦è®© Raspberry Pi Zero 2 W è¿æ¥ Wi-Fi ç½‘ç»œï¼Œæ¯”å¦‚åˆæ¬¡é…ç½®ã€è¿œç¨‹è°ƒè¯•æˆ–ç½‘ç»œå›é€€ã€‚

### 1. ä¿®æ”¹é…ç½®æ–‡ä»¶æ–¹å¼å¤ªç¹ç

è™½ç„¶ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹å»ºè®®æ‰‹åŠ¨ç¼–è¾‘ `/etc/wpa_supplicant/wpa_supplicant.conf` æ–‡ä»¶æ¥é…ç½® Wi-Fiï¼Œä½†è¿™ç§æ–¹æ³•å®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æ˜¯åœ¨ï¼š

- ä¸ç†Ÿæ‚‰ shell çš„ç”¨æˆ·
- æ‰‹åŠ¨æ ¼å¼é”™è¯¯ã€æƒé™è®¾ç½®é—®é¢˜
- æ²¡æœ‰ä¸²å£æˆ– ssh æ¥å…¥æ‰‹æ®µæ—¶éš¾ä»¥è°ƒè¯•

è€Œä¸”æœ‰è€å“¥è¯´ wpa é…ç½®æ–‡ä»¶çš„æ–¹å¼å·²ç»å¼ƒç”¨äº†ï¼Œhttps://www.reddit.com/r/raspberry_pi/comments/18e00c8/comment/kckw1vn/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button

å› æ­¤æ›´æ¨èä»¥ä¸‹ä¸¤ç§æ›´ç¨³å¦¥çš„æ–¹å¼ï¼š

---

### 2. ä½¿ç”¨ Raspberry Pi Imager é¢„è®¾ Wi-Fiï¼ˆæ¨èï¼‰

ä½¿ç”¨ Raspberry Pi Imager çƒ§å½•é•œåƒæ—¶ï¼Œç‚¹å‡»å³ä¸‹è§’é½¿è½®å›¾æ ‡å¯é¢„è®¾ï¼š

- ä¸»æœºå
- å¯ç”¨ SSH
- è®¾ç½® Wi-Fi SSID å’Œå¯†ç 
- é€‰æ‹© Wi-Fi å›½å®¶ä»£ç 

> çƒ§å½•å®Œæ¯•åæ’å…¥ SD å¡å³å¯è‡ªåŠ¨è”ç½‘ï¼Œé€‚ç”¨äºæ— äººå€¼å®ˆéƒ¨ç½²åœºæ™¯ã€‚

---

### 3. ä½¿ç”¨ `raspi-config` é…ç½® Wi-Fi

å¦ä¸€ç§æ–¹å¼æ˜¯è¿›å…¥ç³»ç»Ÿåæ‰§è¡Œï¼š

```bash
sudo raspi-config
```

ä¾æ¬¡è¿›å…¥ï¼š

```
1 System Options â†’ S1 Wireless LAN
```

ç„¶åè¾“å…¥ï¼š

- Wi-Fi åç§°ï¼ˆSSIDï¼‰
- å¯†ç 

ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆå¹¶å†™å…¥ wpa_supplicant é…ç½®ã€‚

---

### âš  æ³¨æ„ï¼šä»…æ”¯æŒ 2.4GHz Wi-Fi

çœ‹è¿™ä¸ªå¸–å­ï¼šhttps://forums.raspberrypi.com/viewtopic.php?t=360487

ä»¥åŠå®˜æ–¹ç»™å‡ºçš„äº§å“ brief:
Specification ç« èŠ‚ä¸­çš„ Connectivity è¿™ä¸€æ ï¼š

> 2.4GHz IEEE 802.11b/g/n wireless LAN, Bluetooth 4.2, BLE,
> onboard antenna

Raspberry Pi Zero 2 W **ä»…æ”¯æŒ 2.4GHz** Wi-Fi é¢‘æ®µï¼Œ**ä¸æ”¯æŒ 5GHz** ç½‘ç»œã€‚

è¿æ¥ä¸æˆåŠŸæ—¶è¯·ç¡®è®¤è·¯ç”±å™¨æ˜¯å¦å¼€å¯äº† 2.4G é¢‘æ®µï¼Œå¹¶ç¡®ä¿ SSID æ²¡æœ‰éšè—ã€‚

---

## å»ºè®®ä½¿ç”¨ Raspberry Pi Imager è¿›è¡Œåˆå§‹åŒ–é…ç½®

é™¤äº†é…ç½® Wi-Fiï¼Œ**å¯ç”¨ SSH** ç­‰å…¶ä»–åˆå§‹åŒ–æ“ä½œä¹Ÿå¼ºçƒˆæ¨èé€šè¿‡ Raspberry Pi Imager å®Œæˆã€‚

è™½ç„¶ç½‘ä¸Šæœ‰å¾ˆå¤šæ–¹æ³•æ¯”å¦‚æ‰‹åŠ¨åœ¨ boot åˆ†åŒºæ·»åŠ  `ssh` ç©ºæ–‡ä»¶ç­‰ï¼Œä½†è¿™äº›æ–¹æ³•å®¹æ˜“å—ç³»ç»Ÿå˜åŒ–å½±å“ï¼Œå¸¸å¸¸è¸©å‘ã€è€—æ—¶æ›´å¤šã€‚

ä½¿ç”¨ Pi Imager æä¾›çš„ä¸€ç«™å¼è®¾ç½®ç•Œé¢ï¼Œå¯ä»¥ç¨³å®šåœ°å®Œæˆï¼š

- å¯ç”¨ SSH
- è®¾ç½®ç”¨æˆ·åä¸å¯†ç 
- é…ç½®ä¸»æœºå
- é¢„è®¾ Wi-Fi ä¿¡æ¯
- é…ç½®æœ¬åœ°åŒ–å‚æ•°ï¼ˆæ—¶åŒºã€é”®ç›˜ç­‰ï¼‰

---

### Pi Imager

å¦‚æœä½ æƒ³ææ‡‚ Pi Imager èƒŒåçš„è‡ªåŠ¨é…ç½®æœºåˆ¶æˆ–è‡ªè¡Œæ‰©å±•å®šåˆ¶ï¼Œå¯ä»¥ç›´æ¥é˜…è¯»å®ƒçš„æºç ï¼š

> GitHub åœ°å€ï¼šhttps://github.com/raspberrypi/rpi-imager

æ¨èç›´æ¥ `git clone` ä¸‹æ¥ï¼Œç„¶åæœç´¢å…³é”®è¯ï¼ˆå¦‚ `ssh`, `wpa`, `hostname` ç­‰ï¼‰ï¼Œæºç é€»è¾‘æ¯”å„ç§å¸–å­æ¸…æ™°å¯é å¾—å¤šã€‚
