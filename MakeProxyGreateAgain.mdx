---
title: Make Proxy Great Again
date: '2025-05-22'
tags: ['']
draft: false
summary:
---

## apt

走代理

```shell
sudo https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890  apt update
sudo https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890  apt install -y python3.11 python3.11-distutils python3.11-venv
```

## pip

更换源头

> https://pip.pypa.io/en/stable/topics/configuration/

**临时**

```shell
pip install some-package -i https://pypi.tuna.tsinghua.edu.cn/simpl
```

有些包在国内源找不到（比如mcp-openapi-proxy），官方源：

```shell
pip install some-package -i https://pypi.org/simple
```

**持久化**

```shell
vi ~/.pip/pip.conf
```

更改源
```
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
timeout = 10

[install]
trusted-host = pypi.tuna.tsinghua.edu.cn
```

```shell
# 验证
pip config list
```

更换代理：

```shell
pip install some-package -i https://pypi.org/simple --proxy http://vpnserver:7890
```

## npm

### Source

npm install --force --verbose --registry=https://registry.npmmirror.com

### Proxy

https://docs.npmjs.com/cli/v10/using-npm/config#proxy

https://docs.npmjs.com/cli/v10/using-npm/config#https-proxy

https://docs.npmjs.com/cli/v10/using-npm/config#registry

**临时**

```shell
npm install some-packages --registry=https://registry.npmmirror.com
```

**持久化**

```sh
# 换源
npm config delete registry
npm config set registry https://registry.npmmirror.com
npm get registry # 验证

# 走代理
npm config ls -l | grep proxy

npm config set https-proxy http://<username>:<password>@<proxy-server-url>:<port>
npm config set proxy http://<username>:<password>@<proxy-server-url>:<port>

npm config delete proxy
npm config delete https-proxy
```

## git

### Proxy

https://git-scm.com/docs/git-config#Documentation/git-config.txt-httpproxy

> http.proxy
>
>   Override the HTTP proxy, normally configured using the http_proxy, https_proxy

git config set [scope] http.proxy address

system wide: /etc/gitconfig

user global: ~/.gitconfig

```
[http]
    proxy = http://vpnserver:7890
```
